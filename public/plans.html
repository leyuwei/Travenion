<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>我的旅游计划 - Travenion</title>
  <base href="/travenion/">
  <link rel="icon" href="logo.svg">
  <link href="https://fonts.loli.net/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <!-- 导航栏 -->
    <nav class="navbar">
      <a href="#" class="brand">
        <img src="logo.svg" alt="Travenion">
        <span>Travenion</span>
      </a>
      <div style="display: flex; gap: 15px; align-items: center;">
        <span id="userWelcome" style="color: #6b7280;"></span>
        <button id="logout" class="btn btn-secondary">退出登录</button>
      </div>
    </nav>

    <!-- 页面标题 -->
    <div class="card fade-in">
      <div class="card-header">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h1 class="card-title" style="margin-bottom: 5px;">我的旅游计划</h1>
            <p style="color: #6b7280; margin: 0;">管理您的所有旅行计划，开始精彩的旅程</p>
          </div>
          <button id="newPlanBtn" class="btn btn-primary">
            <span>+ 新建计划</span>
          </button>
        </div>
      </div>
    </div>

    <!-- 计划列表 -->
    <div id="planListContainer" class="fade-in">
      <div id="emptyState" style="display: none; text-align: center; padding: 60px 20px;">
        <div style="font-size: 4rem; margin-bottom: 20px;">✈️</div>
        <h3 style="color: #6b7280; margin-bottom: 10px;">还没有旅行计划</h3>
        <p style="color: #9ca3af;">创建您的第一个旅行计划，开始规划美好的旅程吧！</p>
        <button class="btn btn-primary" onclick="document.getElementById('newPlanBtn').click()">
          创建第一个计划
        </button>
      </div>
      <div id="planGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;"></div>
    </div>

    <!-- 统计信息 -->
    <div id="statsContainer" class="fade-in" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px;">
      <div class="card">
        <h3 style="color: #2563eb; margin-bottom: 10px;">📊 计划统计</h3>
        <div style="display: flex; justify-content: space-between;">
          <span>总计划数:</span>
          <span id="totalPlans" class="badge">0</span>
        </div>
      </div>
      <div class="card">
        <h3 style="color: #059669; margin-bottom: 10px;">🎯 最近活动</h3>
        <p id="lastActivity" style="color: #6b7280; margin: 0;">暂无活动</p>
      </div>
    </div>
  </div>

  <!-- 新建计划模态框 -->
  <div id="newPlanModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 style="margin: 0;">创建新的旅行计划</h2>
        <button class="close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="newPlanForm">
          <div class="form-group">
            <label class="form-label">计划标题 *</label>
            <input type="text" class="form-control" name="title" placeholder="例如：日本关西7日游" required>
          </div>
          <div class="form-group">
            <label class="form-label">计划描述</label>
            <textarea class="form-control" name="description" rows="3" placeholder="简单描述一下这次旅行的主要目的和特色..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">默认地图服务</label>
            <select class="form-control form-select" name="defaultMap">
              <option value="openstreetmap">OpenStreetMap</option>
              <option value="baidu">百度地图</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeModal()">取消</button>
        <button type="submit" form="newPlanForm" class="btn btn-primary">
          <span class="create-text">创建计划</span>
          <span class="loading" style="display: none;"></span>
        </button>
      </div>
    </div>
  </div>

  <!-- 通知容器 -->
  <div id="notification-container" style="position: fixed; top: 20px; right: 20px; z-index: 1000;"></div>

  <script src="js/plans.js"></script>
</body>
</html>
